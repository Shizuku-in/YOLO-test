<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>监控系统 DEMO</title>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
    <link rel="stylesheet" href="./css/style.css"> 

    <script type="importmap">
    {
      "imports": {
        "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js",
        "element-plus": "https://unpkg.com/element-plus/dist/index.full.mjs"
      }
    }
    </script>
</head>
<body>
    <div id="app">
        <div class="header">
            <div class="header-title">
                <span class="header-icon">⚠</span> 
                监控系统 DEMO <span style="font-size: 12px; opacity: 0.5; font-weight: normal; margin-top: 4px;">V0.1</span>
            </div>
            
            <div class="status-badge" :class="isCloudConnected ? 'online' : 'offline'">
                <div class="status-dot"></div> 
                {{ isCloudConnected ? '后端连接正常' : '后端连接失败' }}
            </div>
        </div>

        <div class="container">
            <div class="video-section">
                <div class="video-hud"></div>
                <div class="camera-info">CAM_01</div>
                
                <div class="live-indicator" :class="isCameraConnected ? 'online' : 'offline'">
                    <div class="indicator-dot"></div> 
                    {{ isCameraConnected ? 'LIVE' : 'DISCONNECTED' }}
                </div>

                <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                    <img :src="videoSrc" 
                        class="video-stream"
                        @load="handleVideoLoad"
                        @error="handleVideoError"
                        alt="无视频流" />
                </div>
            </div>

            <div class="alarm-section">
                <div class="alarm-header">
                    <h3>风险预警</h3>
                    <span style="font-size: 12px; color: var(--text-secondary);">累计: {{ alarms.length }}</span>
                </div>
                
                <div class="alarm-list">
                    <el-empty v-if="alarms.length === 0" :image-size="80" description="暂无异常"></el-empty>
                    
                    <div v-for="(alarm, index) in alarms" 
                         :key="index" 
                         class="alarm-item"
                         :class="getAlarmConfig(alarm.type).className">
                        
                        <div class="alarm-top">
                            <span class="alarm-time">{{ alarm.time }}</span>
                            <span class="tag" :class="getAlarmConfig(alarm.type).tagClass">
                                {{ alarm.type }}
                            </span>
                        </div>
                        
                        <div class="alarm-content">
                            <div class="info-row">
                                <span class="label">位置:</span>
                                <span>{{ alarm.location }}</span>
                            </div>
                            <div class="info-row">
                                <span class="label">置信度:</span>
                                <span>{{ alarm.desc }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./js/main.js"></script>
</body>
</html>